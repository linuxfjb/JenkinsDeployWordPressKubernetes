node {
  //this is kubernetes cli again
  //
  stage('Checkout Source') {
    steps {
      //have to depend on the scm check out
      //git url: 'https://github.com/linuxfjb/JenkinsDeployWordPressKubernetes', branch: 'main'
      scm checkout
    }
  }
  stage('Apply Kubernetes files') {
    withKubeConfig([credentialsId: 'user1', serverUrl: 'https://34.148.213.241:6443/']) {
      sh 'kubectl apply -f yaml'
    }
  }
}
